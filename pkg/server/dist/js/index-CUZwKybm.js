var k=(y,m,t)=>new Promise((f,p)=>{var c=o=>{try{s(t.next(o))}catch(l){p(l)}},u=o=>{try{s(t.throw(o))}catch(l){p(l)}},s=o=>o.done?f(o.value):Promise.resolve(o.value).then(c,u);s((t=t.apply(y,m)).next())});import{B as g,bK as _}from"./bootstrap-B4JiwaAL.js";import{u as b,v as B}from"./vxe-table-Db-J8MfO.js";import{g as V,d as A}from"./role-B1t5w_aH.js";import{_ as v,u as z}from"./form.vue_vue_type_script_setup_true_lang-NfvJ4Z78.js";import{_ as P}from"./page.vue_vue_type_script_setup_true_lang-DqBww8k9.js";import{a4 as S,aa as $,ab as h,ac as a,x as i,a7 as r,aB as q,ai as C}from"../jse/index-index-DnPbrghU.js";import{u as D}from"./use-modal-CbDtZeLz.js";import{P as M}from"./plus-B2crc5Qf.js";import"./use-vben-form-DL6PmbJh.js";import"./checkbox.vue_vue_type_script_setup_true_lang-DGZn6EUK.js";import"./render-content.vue_vue_type_script_lang-BMPLX8pd.js";import"./form-BUp9oLlJ.js";import"./css-Dmgy8YJo.js";import"./useMergedState-vURbmIkp.js";import"./EyeOutlined-BnKiYVEu.js";const W=S({__name:"index",setup(y){const[m,t]=D({connectedComponent:v,destroyOnClose:!0}),f={columns:z(),height:"auto",keepSource:!0,proxyConfig:{ajax:{query:e=>k(null,[e],function*({page:n}){try{return yield V({page:n.currentPage,pageSize:n.pageSize})}catch(d){return{items:[],total:0}}})}},rowConfig:{keyField:"id"},toolbarConfig:{custom:!1,export:!1,refresh:{code:"query"},zoom:!1}},[p,c]=b({gridOptions:f});function u(){c.query()}function s(){t.setData({}).open()}function o(n){t.setData(n).open()}function l(n){B({beforeClose({isConfirm:e}){if(e)return A(n.id)},content:"是否确认删除？",icon:"error"}).then(()=>{_.success("删除成功"),u()}).catch(e=>{e.message!=="dialog cancelled"&&_.error(e)})}return(n,e)=>(h(),$(r(P),{"auto-content-height":""},{default:a(()=>[i(r(m),{onSuccess:u}),i(r(p),{"table-title":"角色列表"},{"toolbar-tools":a(()=>[i(r(g),{type:"primary",onClick:s},{default:a(()=>[i(r(M),{class:"size-5"}),e[0]||(e[0]=C(" 创建角色 "))]),_:1})]),action:a(({row:d})=>[i(r(g),{type:"link",onClick:x=>o(d)},{default:a(()=>e[1]||(e[1]=[C("修改")])),_:2},1032,["onClick"]),e[3]||(e[3]=q("span",null,"|",-1)),i(r(g),{danger:"",type:"link",onClick:x=>l(d)},{default:a(()=>e[2]||(e[2]=[C("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1}))}});export{W as default};
