var k=(y,m,t)=>new Promise((f,l)=>{var c=o=>{try{s(t.next(o))}catch(p){l(p)}},u=o=>{try{s(t.throw(o))}catch(p){l(p)}},s=o=>o.done?f(o.value):Promise.resolve(o.value).then(c,u);s((t=t.apply(y,m)).next())});import{u as b,v as B}from"./vxe-table-Db-J8MfO.js";import{d as V,g as A}from"./node-hUzDsXOU.js";import{B as g,bK as _}from"./bootstrap-B4JiwaAL.js";import{_ as N,u as v}from"./form.vue_vue_type_script_setup_true_lang-Co7rncE7.js";import{P as z}from"./plus-B2crc5Qf.js";import{_ as F}from"./page.vue_vue_type_script_setup_true_lang-DqBww8k9.js";import{a4 as P,aa as S,ab as $,ac as a,x as i,a7 as n,aB as h,ai as C}from"../jse/index-index-DnPbrghU.js";import{u as q}from"./use-modal-CbDtZeLz.js";import"./use-vben-form-DL6PmbJh.js";import"./checkbox.vue_vue_type_script_setup_true_lang-DGZn6EUK.js";import"./render-content.vue_vue_type_script_lang-BMPLX8pd.js";import"./form-BUp9oLlJ.js";import"./css-Dmgy8YJo.js";import"./useMergedState-vURbmIkp.js";import"./EyeOutlined-BnKiYVEu.js";const W=P({__name:"index",setup(y){const[m,t]=q({connectedComponent:N,destroyOnClose:!0}),f={columns:v(),height:"auto",keepSource:!0,proxyConfig:{ajax:{query:e=>k(null,[e],function*({page:r}){try{return yield A({page:r.currentPage,pageSize:r.pageSize})}catch(d){return{items:[],total:0}}})}},rowConfig:{keyField:"id"},toolbarConfig:{custom:!1,export:!1,refresh:{code:"query"},zoom:!1}},[l,c]=b({gridOptions:f});function u(){c.query()}function s(){t.setData({}).open()}function o(r){t.setData(r).open()}function p(r){B({beforeClose({isConfirm:e}){if(e)return V(r.id)},content:"是否确认删除？",icon:"error"}).then(()=>{_.success("删除成功"),u()}).catch(e=>{e.message!=="dialog cancelled"&&_.error(e)})}return(r,e)=>($(),S(n(F),{"auto-content-height":""},{default:a(()=>[i(n(m),{onSuccess:u}),i(n(l),{"table-title":"节点列表"},{"toolbar-tools":a(()=>[i(n(g),{type:"primary",onClick:s},{default:a(()=>[i(n(z),{class:"size-5"}),e[0]||(e[0]=C(" 创建节点 "))]),_:1})]),action:a(({row:d})=>[i(n(g),{type:"link",onClick:x=>o(d)},{default:a(()=>e[1]||(e[1]=[C("修改")])),_:2},1032,["onClick"]),e[3]||(e[3]=h("span",null,"|",-1)),i(n(g),{danger:"",type:"link",onClick:x=>p(d)},{default:a(()=>e[2]||(e[2]=[C("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1}))}});export{W as default};
