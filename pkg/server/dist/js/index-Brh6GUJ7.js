var k=(y,m,t)=>new Promise((f,p)=>{var c=o=>{try{i(t.next(o))}catch(l){p(l)}},u=o=>{try{i(t.throw(o))}catch(l){p(l)}},i=o=>o.done?f(o.value):Promise.resolve(o.value).then(c,u);i((t=t.apply(y,m)).next())});import{B as g,bK as _}from"./bootstrap-B4JiwaAL.js";import{u as b,v as B}from"./vxe-table-Db-J8MfO.js";import{_ as V,u as A,d as h,g as v}from"./form.vue_vue_type_script_setup_true_lang-8geqgSup.js";import{_ as z}from"./page.vue_vue_type_script_setup_true_lang-DqBww8k9.js";import{a4 as P,aa as S,ab as $,ac as n,x as s,a7 as a,aB as q,ai as C}from"../jse/index-index-DnPbrghU.js";import{u as D}from"./use-modal-CbDtZeLz.js";import{P as M}from"./plus-B2crc5Qf.js";import"./use-vben-form-DL6PmbJh.js";import"./checkbox.vue_vue_type_script_setup_true_lang-DGZn6EUK.js";import"./render-content.vue_vue_type_script_lang-BMPLX8pd.js";import"./form-BUp9oLlJ.js";import"./css-Dmgy8YJo.js";import"./useMergedState-vURbmIkp.js";import"./EyeOutlined-BnKiYVEu.js";import"./role-B1t5w_aH.js";const W=P({__name:"index",setup(y){const[m,t]=D({connectedComponent:V,destroyOnClose:!0}),f={columns:A(),height:"auto",keepSource:!0,proxyConfig:{ajax:{query:e=>k(null,[e],function*({page:r}){try{return yield v({page:r.currentPage,pageSize:r.pageSize})}catch(d){return{items:[],total:0}}})}},rowConfig:{keyField:"id"},toolbarConfig:{custom:!1,export:!1,refresh:{code:"query"},search:!1,zoom:!1}},[p,c]=b({gridOptions:f});function u(){c.query()}function i(){t.setData({}).open()}function o(r){t.setData(r).open()}function l(r){B({beforeClose({isConfirm:e}){if(e)return h(r.id)},content:"是否确认删除？",icon:"error"}).then(()=>{_.success("删除成功"),u()}).catch(e=>{e.message!=="dialog cancelled"&&_.error(e)})}return(r,e)=>($(),S(a(z),{"auto-content-height":""},{default:n(()=>[s(a(m),{onSuccess:u}),s(a(p),{"table-title":"管理员列表"},{"toolbar-tools":n(()=>[s(a(g),{type:"primary",onClick:i},{default:n(()=>[s(a(M),{class:"size-5"}),e[0]||(e[0]=C(" 创建管理员 "))]),_:1})]),action:n(({row:d})=>[s(a(g),{type:"link",onClick:x=>o(d)},{default:n(()=>e[1]||(e[1]=[C("修改")])),_:2},1032,["onClick"]),e[3]||(e[3]=q("span",null,"|",-1)),s(a(g),{danger:"",type:"link",onClick:x=>l(d)},{default:n(()=>e[2]||(e[2]=[C("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1}))}});export{W as default};
