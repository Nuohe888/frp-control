var p=(f,l,s)=>new Promise((r,i)=>{var o=a=>{try{c(s.next(a))}catch(n){i(n)}},m=a=>{try{c(s.throw(a))}catch(n){i(n)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(o,m);c((s=s.apply(f,l)).next())});import{u as D}from"./form-BUp9oLlJ.js";import{ca as h,cb as b,bK as A}from"./bootstrap-B4JiwaAL.js";import{u as C}from"./data-BLbCZo9I.js";import{a4 as V,P as d,J as g,aa as k,ab as w,ac as x,x as F,a7 as v}from"../jse/index-index-DnPbrghU.js";import{u as M}from"./use-modal-CbDtZeLz.js";const P=V({__name:"formData",emits:["success"],setup(f,{emit:l}){const s=l,r=d(),[i,o]=D({schema:C(),showDefaultActions:!1}),m=()=>p(null,null,function*(){const{valid:t}=yield o.validate();if(!t)return;const e=yield o.getValues();u.lock(),(a.value?h(a.value,e):b(e)).then(()=>{s("success"),A.success(`${a.value?"更新":"创建"}成功`),u.close()}).catch(()=>{u.unlock()})}),c=t=>{if(t){const e=u.getData();o.resetForm(),e?(r.value=e,a.value=e.id,o.setValues(e)):a.value=void 0}},a=d(),[n,u]=M({destroyOnClose:!0,onConfirm:m,onOpenChange:c}),_=g(()=>{var t;return(t=r.value)!=null&&t.id?"编辑字典数据":"创建字典数据"});return(t,e)=>(w(),k(v(n),{title:_.value},{default:x(()=>[F(v(i))]),_:1},8,["title"]))}});export{P as _};
