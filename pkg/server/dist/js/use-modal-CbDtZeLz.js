var Je=Object.defineProperty,Qe=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var ie=(s,o,t)=>o in s?Je(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t,f=(s,o)=>{for(var t in o||(o={}))Ce.call(o,t)&&ie(s,t,o[t]);if(G)for(var t of G(o))ke.call(o,t)&&ie(s,t,o[t]);return s},P=(s,o)=>Qe(s,Ge(o));var R=(s,o)=>{var t={};for(var a in s)Ce.call(s,a)&&o.indexOf(a)<0&&(t[a]=s[a]);if(s!=null&&G)for(var a of G(s))o.indexOf(a)<0&&ke.call(s,a)&&(t[a]=s[a]);return t};var N=(s,o,t)=>ie(s,typeof o!="symbol"?o+"":o,t);var X=(s,o,t)=>new Promise((a,i)=>{var c=d=>{try{v(t.next(d))}catch(r){i(r)}},m=d=>{try{v(t.throw(d))}catch(r){i(r)}},v=d=>d.done?a(d.value):Promise.resolve(d.value).then(c,m);v((t=t.apply(s,o)).next())});import{a4 as M,aa as h,ab as p,a7 as e,af as Ze,ag as eo,ac as y,a8 as C,R as De,av as ue,J as A,P as _,x as F,aq as B,aw as oo,aV as I,aW as O,ad as pe,T as $e,a9 as to,ao as so,az as ao,bt as ce,an as no,Y as lo,aB as ro,ai as Y,aj as j,ah as Be,n as fe,aF as Se,bj as io,i as co,bR as uo,k as we}from"../jse/index-index-DnPbrghU.js";import{_ as po,S as fo,c as mo}from"./use-vben-form-DL6PmbJh.js";import{aR as me,a$ as Ae,bN as ho,bO as yo,bP as vo,a7 as go,bQ as bo,bR as Co,b1 as Te,bS as ko,bT as Bo,bj as wo,bl as _o,bU as Oo,bV as Mo,bW as xo,bX as Do,bY as $o,br as So,aU as _e}from"./bootstrap-B4JiwaAL.js";const Ao=me("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]);const To=me("shrink",[["path",{d:"m15 15 6 6m-6-6v4.8m0-4.8h4.8",key:"17vawe"}],["path",{d:"M9 19.8V15m0 0H4.2M9 15l-6 6",key:"chjx8e"}],["path",{d:"M15 4.2V9m0 0h4.8M15 9l6-6",key:"lav6yq"}],["path",{d:"M9 4.2V9m0 0H4.2M9 9 3 3",key:"1pxi2q"}]]);const Eo=me("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Po=M({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:o}){const i=Ae(s,o);return(c,m)=>(p(),h(e(ho),Ze(eo(e(i))),{default:y(()=>[C(c.$slots,"default")]),_:3},16))}}),Io=["data-dismissable-modal"],Lo=M({__name:"DialogOverlay",setup(s){yo();const o=De("DISMISSABLE_MODAL_ID");return(t,a)=>(p(),ue("div",{"data-dismissable-modal":e(o),class:"bg-overlay z-popup inset-0"},null,8,Io))}}),zo=M({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},appendTo:{default:"body"},class:{},closeClass:{},closeDisabled:{type:Boolean,default:!1},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},showClose:{type:Boolean,default:!0},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(s,{expose:o,emit:t}){const a=s,i=t,c=A(()=>{const T=a,{class:l,modal:u,open:k,showClose:x}=T;return R(T,["class","modal","open","showClose"])});function m(){return a.appendTo==="body"||a.appendTo===document.body||!a.appendTo}const v=A(()=>m()?"fixed":"absolute"),d=Ae(c,i),r=_(null);function g(l){var u;l.target===((u=r.value)==null?void 0:u.$el)&&(a.open?i("opened"):i("closed"))}return o({getContentRef:()=>r.value}),(l,u)=>(p(),h(e(vo),{to:l.appendTo},{default:y(()=>[F(go,{name:"fade"},{default:y(()=>[l.open&&l.modal?(p(),h(Lo,{key:0,style:oo(P(f({},l.zIndex?{zIndex:l.zIndex}:{}),{position:v.value,backdropFilter:l.overlayBlur&&l.overlayBlur>0?`blur(${l.overlayBlur}px)`:"none"})),onClick:u[0]||(u[0]=()=>i("close"))},null,8,["style"])):B("",!0)]),_:1}),F(e(Co),pe({ref_key:"contentRef",ref:r,style:P(f({},l.zIndex?{zIndex:l.zIndex}:{}),{position:v.value}),onAnimationend:g},e(d),{class:e(O)("z-popup bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%] w-full p-6 shadow-lg outline-none sm:rounded-xl",a.class)}),{default:y(()=>[C(l.$slots,"default"),l.showClose?(p(),h(e(bo),{key:0,disabled:l.closeDisabled,class:I(e(O)("data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-3 top-3 h-6 w-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none",a.closeClass)),onClick:u[1]||(u[1]=()=>i("close"))},{default:y(()=>[F(e(Eo),{class:"h-4 w-4"})]),_:1},8,["disabled","class"])):B("",!0)]),_:3},16,["style","class"])]),_:3},8,["to"]))}}),Oe=M({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const o=s,t=A(()=>{const m=o,{class:i}=m;return R(m,["class"])}),a=Te(t);return(i,c)=>(p(),h(e(ko),pe(e(a),{class:e(O)("text-muted-foreground text-sm",o.class)}),{default:y(()=>[C(i.$slots,"default")]),_:3},16,["class"]))}}),Vo=M({__name:"DialogFooter",props:{class:{}},setup(s){const o=s;return(t,a)=>(p(),ue("div",{class:I(e(O)("flex flex-row flex-col-reverse justify-end gap-x-2",o.class))},[C(t.$slots,"default")],2))}}),Fo=M({__name:"DialogHeader",props:{class:{}},setup(s){const o=s;return(t,a)=>(p(),ue("div",{class:I(e(O)("flex flex-col gap-y-1.5 text-center sm:text-left",o.class))},[C(t.$slots,"default")],2))}}),Me=M({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const o=s,t=A(()=>{const m=o,{class:i}=m;return R(m,["class"])}),a=Te(t);return(i,c)=>(p(),h(e(Bo),pe(e(a),{class:e(O)("text-lg font-semibold leading-none tracking-tight",o.class)}),{default:y(()=>[C(i.$slots,"default")]),_:3},16,["class"]))}});function Ro(s,o,t){const a=$e({offsetX:0,offsetY:0}),i=_(!1),c=r=>{const g=r.clientX,l=r.clientY;if(!s.value)return;const u=s.value.getBoundingClientRect(),{offsetX:k,offsetY:x}=a,w=u.left,T=u.top,Z=u.width,U=u.height,H=document.documentElement,ee=H.clientWidth,oe=H.clientHeight,te=-w+k,se=-T+x,L=ee-w-Z+k,ae=oe-T-U+x,W=K=>{let $=k+K.clientX-g,z=x+K.clientY-l;$=Math.min(Math.max($,te),L),z=Math.min(Math.max(z,se),ae),a.offsetX=$,a.offsetY=z,s.value&&(s.value.style.transform=`translate(${$}px, ${z}px)`,i.value=!0)},q=()=>{i.value=!1,document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",q)};document.addEventListener("mousemove",W),document.addEventListener("mouseup",q)},m=()=>{const r=ce(o);r&&s.value&&r.addEventListener("mousedown",c)},v=()=>{const r=ce(o);r&&s.value&&r.removeEventListener("mousedown",c)},d=()=>{a.offsetX=0,a.offsetY=0;const r=ce(s);r&&(r.style.transform="none")};return to(()=>{so(()=>{t.value?m():v()})}),ao(()=>{v()}),{dragging:i,resetPosition:d,transform:a}}const No=M({__name:"modal",props:{modalApi:{default:void 0},appendToMain:{type:Boolean,default:!1},bordered:{type:Boolean},cancelText:{},centered:{type:Boolean},class:{},closable:{type:Boolean},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmDisabled:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},destroyOnClose:{type:Boolean,default:!1},draggable:{type:Boolean},footer:{type:Boolean},footerClass:{},fullscreen:{type:Boolean},fullscreenButton:{type:Boolean},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean},title:{},titleTooltip:{},zIndex:{}},setup(s){var Q,be;const o=s,t=wo.getComponents(),a=_(),i=_(),c=_(),m=_(),v=_(),d=no();Se("DISMISSABLE_MODAL_ID",d);const{$t:r}=_o(),{isMobile:g}=Oo(),l=(be=(Q=o.modalApi)==null?void 0:Q.useStore)==null?void 0:be.call(Q),{appendToMain:u,bordered:k,cancelText:x,centered:w,class:T,closable:Z,closeOnClickModal:U,closeOnPressEscape:H,confirmDisabled:ee,confirmLoading:oe,confirmText:te,contentClass:se,description:L,destroyOnClose:ae,draggable:W,footer:q,footerClass:K,fullscreen:$,fullscreenButton:z,header:ne,headerClass:Ee,loading:he,modal:Pe,openAutoFocus:Ie,overlayBlur:Le,showCancelButton:ze,showConfirmButton:Ve,submitting:D,title:J,titleTooltip:ye,zIndex:Fe}=Mo(o,l),le=A(()=>$.value&&ne.value||g.value),ve=A(()=>W.value&&!le.value&&ne.value),{dragging:Re,transform:Ne}=Ro(c,m,ve),re=_(!1),de=_(!0);lo(()=>{var n;return(n=l==null?void 0:l.value)==null?void 0:n.isOpen},n=>X(null,null,function*(){if(n){if(de.value=!1,re.value||(re.value=!0),yield fe(),!a.value)return;const b=a.value.getContentRef();c.value=b.$el;const{offsetX:V,offsetY:E}=Ne;c.value.style.transform=`translate(${V}px, ${E}px)`}}),{immediate:!0});function Xe(){var n;(n=o.modalApi)==null||n.setState(b=>P(f({},b),{fullscreen:!$.value}))}function Ye(n){(!U.value||D.value)&&(n.preventDefault(),n.stopPropagation())}function je(n){(!H.value||D.value)&&n.preventDefault()}function Ue(n){Ie.value||n==null||n.preventDefault()}function He(n){const b=n.target,V=b==null?void 0:b.dataset.dismissableModal;(!U.value||V!==d||D.value)&&(n.preventDefault(),n.stopPropagation())}function ge(n){n.preventDefault(),n.stopPropagation()}const We=A(()=>u.value?`#${xo}>div:not(.absolute)>div`:void 0),qe=A(()=>!e(ae)&&e(re));function Ke(){var n;de.value=!0,(n=o.modalApi)==null||n.onClosed()}return(n,b)=>{var V;return p(),h(e(Po),{modal:!1,open:(V=e(l))==null?void 0:V.isOpen,"onUpdate:open":b[3]||(b[3]=()=>{var E;return e(D)||(E=n.modalApi)==null?void 0:E.close()})},{default:y(()=>{var E;return[F(e(zo),{ref_key:"contentRef",ref:a,"append-to":We.value,class:I(e(O)("left-0 right-0 top-[10vh] mx-auto flex max-h-[80%] w-[520px] flex-col p-0 sm:rounded-[var(--radius)]",e(T),{"border-border border":e(k),"shadow-3xl":!e(k),"left-0 top-0 size-full max-h-full !translate-x-0 !translate-y-0":le.value,"top-1/2 !-translate-y-1/2":e(w)&&!le.value,"duration-300":!e(Re),hidden:de.value})),"force-mount":qe.value,modal:e(Pe),open:(E=e(l))==null?void 0:E.isOpen,"show-close":e(Z),"z-index":e(Fe),"overlay-blur":e(Le),"close-class":"top-3",onCloseAutoFocus:ge,onClosed:Ke,"close-disabled":e(D),onEscapeKeyDown:je,onFocusOutside:ge,onInteractOutside:Ye,onOpenAutoFocus:Ue,onOpened:b[2]||(b[2]=()=>{var S;return(S=n.modalApi)==null?void 0:S.onOpened()}),onPointerDownOutside:He},{default:y(()=>[F(e(Fo),{ref_key:"headerRef",ref:m,class:I(e(O)("px-5 py-4",{"border-b":e(k),hidden:!e(ne),"cursor-move select-none":ve.value},e(Ee)))},{default:y(()=>[e(J)?(p(),h(e(Me),{key:0,class:"text-left"},{default:y(()=>[C(n.$slots,"title",{},()=>[Y(j(e(J))+" ",1),e(ye)?C(n.$slots,"titleTooltip",{key:0},()=>[F(e(po),{"trigger-class":"pb-1"},{default:y(()=>[Y(j(e(ye)),1)]),_:1})]):B("",!0)])]),_:3})):B("",!0),e(L)?(p(),h(e(Oe),{key:1},{default:y(()=>[C(n.$slots,"description",{},()=>[Y(j(e(L)),1)])]),_:3})):B("",!0),!e(J)||!e(L)?(p(),h(e(Do),{key:2},{default:y(()=>[e(J)?B("",!0):(p(),h(e(Me),{key:0})),e(L)?B("",!0):(p(),h(e(Oe),{key:1}))]),_:1})):B("",!0)]),_:3},8,["class"]),ro("div",{ref_key:"wrapperRef",ref:i,class:I(e(O)("relative min-h-40 flex-1 overflow-y-auto p-3",e(se),{"pointer-events-none":e(he)||e(D)}))},[C(n.$slots,"default")],2),e(he)||e(D)?(p(),h(e($o),{key:0,spinning:""})):B("",!0),e(z)?(p(),h(e(So),{key:1,class:"hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-10 top-3 hidden size-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none sm:block",onClick:Xe},{default:y(()=>[e($)?(p(),h(e(To),{key:0,class:"size-3.5"})):(p(),h(e(Ao),{key:1,class:"size-3.5"}))]),_:1})):B("",!0),e(q)?(p(),h(e(Vo),{key:2,ref_key:"footerRef",ref:v,class:I(e(O)("flex-row items-center justify-end p-2",{"border-t":e(k)},e(K)))},{default:y(()=>[C(n.$slots,"prepend-footer"),C(n.$slots,"footer",{},()=>[e(ze)?(p(),h(Be(e(t).DefaultButton||e(_e)),{key:0,variant:"ghost",disabled:e(D),onClick:b[0]||(b[0]=()=>{var S;return(S=n.modalApi)==null?void 0:S.onCancel()})},{default:y(()=>[C(n.$slots,"cancelText",{},()=>[Y(j(e(x)||e(r)("cancel")),1)])]),_:3},8,["disabled"])):B("",!0),C(n.$slots,"center-footer"),e(Ve)?(p(),h(Be(e(t).PrimaryButton||e(_e)),{key:1,disabled:e(ee),loading:e(oe)||e(D),onClick:b[1]||(b[1]=()=>{var S;return(S=n.modalApi)==null?void 0:S.onConfirm()})},{default:y(()=>[C(n.$slots,"confirmText",{},()=>[Y(j(e(te)||e(r)("confirm")),1)])]),_:3},8,["disabled","loading"])):B("",!0)]),C(n.$slots,"append-footer")]),_:3},8,["class"])):B("",!0)]),_:3},8,["append-to","class","force-mount","modal","open","show-close","z-index","overlay-blur","close-disabled"])]}),_:3},8,["open"])}}});class Xo{constructor(o={}){N(this,"sharedData",{payload:{}});N(this,"store");N(this,"api");N(this,"state");const l=o,{connectedComponent:t,onBeforeClose:a,onCancel:i,onClosed:c,onConfirm:m,onOpenChange:v,onOpened:d}=l,r=R(l,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),g={bordered:!0,centered:!1,class:"",closeOnClickModal:!0,closeOnPressEscape:!0,confirmDisabled:!1,confirmLoading:!1,contentClass:"",destroyOnClose:!0,draggable:!1,footer:!0,footerClass:"",fullscreen:!1,fullscreenButton:!0,header:!0,headerClass:"",isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,showCancelButton:!0,showConfirmButton:!0,title:""};this.store=new fo(f(f({},g),r),{onUpdate:()=>{var k,x,w;const u=this.store.state;(u==null?void 0:u.isOpen)===((k=this.state)==null?void 0:k.isOpen)?this.state=u:(this.state=u,(w=(x=this.api).onOpenChange)==null||w.call(x,!!(u!=null&&u.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:i,onClosed:c,onConfirm:m,onOpenChange:v,onOpened:d},io(this)}close(){return X(this,null,function*(){var t,a,i;((i=yield(a=(t=this.api).onBeforeClose)==null?void 0:a.call(t))!=null?i:!0)&&this.store.setState(c=>P(f({},c),{isOpen:!1,submitting:!1}))})}getData(){var o,t;return(t=(o=this.sharedData)==null?void 0:o.payload)!=null?t:{}}lock(o=!0){return this.setState({submitting:o})}onCancel(){var o,t;this.api.onCancel?(t=(o=this.api).onCancel)==null||t.call(o):this.close()}onClosed(){var o,t;this.state.isOpen||(t=(o=this.api).onClosed)==null||t.call(o)}onConfirm(){var o,t;(t=(o=this.api).onConfirm)==null||t.call(o)}onOpened(){var o,t;this.state.isOpen&&((t=(o=this.api).onOpened)==null||t.call(o))}open(){this.store.setState(o=>P(f({},o),{isOpen:!0}))}setData(o){return this.sharedData.payload=o,this}setState(o){return co(o)?this.store.setState(o):this.store.setState(t=>f(f({},t),o)),this}unlock(){return this.lock(!1)}}const xe=Symbol("VBEN_MODAL_INJECT"),Yo={};function Ko(s={}){var v;const{connectedComponent:o}=s;if(o){const d=$e({}),r=_(!0),g=M((l,{attrs:u,slots:k})=>(Se(xe,{extendApi(w){Object.setPrototypeOf(d,w)},options:s,reCreateModal(){return X(this,null,function*(){r.value=!1,yield fe(),r.value=!0})}}),jo(d,f(f(f({},l),u),k)),()=>we(r.value?o:"div",f(f({},l),u),k)),{name:"VbenParentModal",inheritAttrs:!1});return uo(()=>{var l;(l=d==null?void 0:d.close)==null||l.call(d)}),[g,d]}const t=De(xe,{}),a=f(f(f({},Yo),t.options),s);a.onOpenChange=d=>{var r,g,l;(r=s.onOpenChange)==null||r.call(s,d),(l=(g=t.options)==null?void 0:g.onOpenChange)==null||l.call(g,d)},a.onClosed=()=>{var d,r;(d=s.onClosed)==null||d.call(s),a.destroyOnClose&&((r=t.reCreateModal)==null||r.call(t))};const i=new Xo(a),c=i;c.useStore=d=>mo(i.store,d);const m=M((d,{attrs:r,slots:g})=>()=>we(No,P(f(f({},d),r),{modalApi:c}),g),{name:"VbenModal",inheritAttrs:!1});return(v=t.extendApi)==null||v.call(t,c),[m,c]}function jo(s,o){return X(this,null,function*(){var i;if(!o||Object.keys(o).length===0)return;yield fe();const t=(i=s==null?void 0:s.store)==null?void 0:i.state;if(!t)return;const a=new Set(Object.keys(t));for(const c of Object.keys(o))a.has(c)&&!["class"].includes(c)&&console.warn(`[Vben Modal]: When 'connectedComponent' exists, do not set props or slots '${c}', which will increase complexity. If you need to modify the props of Modal, please use useVbenModal or api.`)})}export{Eo as X,Ko as u};
